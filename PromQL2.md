# PromQL操作符 #
使用PromQL除了能够方便的按照查询和过滤时间序列以外，PromQL还支持丰富的操作符。用户可以使用这些操作符对进一步的对事件序列进行二次加工。这些操作符包括：数学运算符，逻辑运算符，布尔运算符等等。
## 数学运算 ##

单位换算：   
```
node_memory_free_bytes_total / (1024 * 1024)
```
PromQL支持的所有数学运算符如下所示：
```
        + (加法)
        - (减法)
        * (乘法)
        / (除法)
        % (求余)
        ^ (幂运算)
```
## 使用布尔运算过滤时间序列 ##
在PromQL通过标签匹配模式，用户可以根据时间序列的特征维度对其进行查询。而布尔运算则支持用户根据时间序列中样本的值，对时间序列进行过滤。        
当系统管理员在排查问题的时候可能只想知道当前内存使用率超过95%的主机时。通过使用布尔运算符可以方便的获取到该结果：
```
(node_memory_bytes_total - node_memory_free_bytes_total) / node_memory_bytes_total > 0.95
```
瞬时向量与标量进行布尔运算时，PromQL依次比较向量中的所有时间序列样本的值，如果比较结果为true则保留，反之丢弃。     
目前，Prometheus支持以下布尔运算符如下：
```
        == (相等)
        != (不相等)
        > (大于)
        < (小于)
        >= (大于等于)
        <= (小于等于)
```
## 使用bool修饰符改变布尔运算符的行为 ##
布尔运算符的默认行为是对时序数据进行过滤。而在其它的情况下我们可能需要的是真正的布尔结果。例如，只需要知道当前模块的HTTP请求量是否>=1000，如果大于等于1000则返回1（true）否则返回0（false）。这时可以使用bool修饰符改变布尔运算的默认行为:
```
http_requests_total > bool 1000
```
使用bool修改符后，布尔运算不会对时间序列进行过滤，而是直接依次瞬时向量中的各个样本数据与标量的比较结果0或者1。从而形成一条新的时间序列。
